<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Interacting with Erigon - Erigon 3 Docs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Erigon 3 documentation!">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Erigon 3 Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/erigontech/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="interacting-with-erigon"><a class="header" href="#interacting-with-erigon">Interacting with Erigon</a></h1>
<p>The RPC daemon is a -  component of Erigon, enabling JSON remote procedure calls and providing access to various APIs. It is designed to operate effectively both as an internal or as an external component. For detailed instructions on running it remotely, refer to the documentation <a href="https://github.com/erigontech/erigon/blob/main/cmd/rpcdaemon/README.md#running-remotely">here</a>.</p>
<p>The RPC Daemon supports various API namespaces, which can be enabled or disabled using the --http.api flag. The available namespaces include:</p>
<ul>
<li><a href="eth.html"><code>eth</code></a>: Standard Ethereum API.</li>
<li><a href="erigon.html"><code>erigon</code></a>: Erigon-specific extensions.</li>
<li><a href="web3.html"><code>web3</code></a>: Web3 compatibility API.</li>
<li><a href="net.html"><code>net</code></a>: Network information API.</li>
<li><a href="debug.html"><code>debug</code></a>: Debugging and tracing API.</li>
<li><a href="trace.html"><code>trace</code></a>: Transaction tracing API.</li>
<li><a href="txpool.html"><code>txpool</code></a>: Transaction pool API.</li>
<li><a href="admin.html"><code>admin</code></a>: Node administration API</li>
<li><a href="bor.html"><code>bor</code></a>: Polygon Bor-specific API (when running on Polygon)</li>
<li><a href="ots.html"><code>ots</code></a>: These methods are specifically tailored for use with Otterscan, an open-source, fast block explorer.</li>
<li><a href="internal.html"><code>internal</code></a>: Erigon specific API for development and debugging purposes.</li>
<li><a href="gRPC.html"><code>gRPC</code></a>: API for lower-level data access.</li>
</ul>
<p>Looking at the Reth documentation you provided, I'll rewrite it for Erigon based on the codebase context. The documentation covers RPC transports (HTTP, WebSockets, IPC) and API configuration, which corresponds to Erigon's RPC daemon configuration found in <cite>cmd/rpcdaemon/cli/config.go</cite> and related files.</p>
<h2 id="erigon-rpc-transports"><a class="header" href="#erigon-rpc-transports">Erigon RPC Transports</a></h2>
<p>Erigon supports HTTP, WebSockets, IPC, and gRPC through its RPC daemon.</p>
<h3 id="http"><a class="header" href="#http">HTTP</a></h3>
<p>Using the HTTP transport, clients send a request to the server and immediately get a response back. The connection is closed after the response for a given request is sent.</p>
<p>Because HTTP is unidirectional, subscriptions are not supported.</p>
<p>To start an HTTP server, you can either run Erigon with built-in RPC or use the separate <code>rpcdaemon</code>:</p>
<pre><code class="language-bash"># Built-in RPC (default)
erigon --http

# Or separate RPC daemon
rpcdaemon --http.enabled
</code></pre>
<p>The default port is <code>8545</code>, and the default listen address is localhost. <cite>node/nodecfg/defaults.go:30-31</cite></p>
<p>You can configure the listen address and port using <code>--http.addr</code> and <code>--http.port</code> respectively:</p>
<pre><code class="language-bash">erigon --http --http.addr 127.0.0.1 --http.port 12345
# Or with rpcdaemon
rpcdaemon --http.addr 127.0.0.1 --http.port 12345
</code></pre>
<p>To enable JSON-RPC namespaces on the HTTP server, pass each namespace separated by a comma to <code>--http.api</code>:</p>
<pre><code class="language-bash">erigon --http --http.api eth,net,debug,trace
# Or with rpcdaemon
rpcdaemon --http.api eth,net,debug,trace
</code></pre>
<p>The default APIs enabled are <code>eth</code> and <code>erigon</code>. Available namespaces include: <code>admin</code>, <code>debug</code>, <code>eth</code>, <code>erigon</code>, <code>net</code>, <code>trace</code>, <code>txpool</code>, <code>web3</code>, <code>bor</code> (Polygon only), and <code>internal</code>.</p>
<p>You can also restrict who can access the HTTP server by specifying domains for Cross-Origin requests using <code>--http.corsdomain</code>:</p>
<pre><code class="language-bash">erigon --http --http.corsdomain https://mycoolapp.com
</code></pre>
<p>Alternatively, if you want to allow any domain, you can pass <code>*</code>:</p>
<pre><code class="language-bash">erigon --http --http.corsdomain "*"
</code></pre>
<h3 id="websockets"><a class="header" href="#websockets">WebSockets</a></h3>
<p>WebSockets is a bidirectional transport protocol. Most modern browsers support WebSockets.</p>
<p>A WebSocket connection is maintained until it is explicitly terminated by either the client or the node.</p>
<p>Because WebSockets are bidirectional, nodes can push events to clients, which enables clients to subscribe to specific events, such as new transactions in the transaction pool, and new logs for smart contracts.</p>
<p>The configuration of the WebSocket server follows the same pattern as the HTTP server:</p>
<ul>
<li>Enable it using <code>--ws</code></li>
<li>Configure the server port by passing <code>--ws.port</code> (default <code>8546</code>) <cite>node/nodecfg/defaults.go:34</cite></li>
<li>Configure cross-origin requests using <code>--ws.origins</code> (though this maps to <code>--http.corsdomain</code> in Erigon)</li>
<li>WebSocket APIs inherit from the HTTP API configuration</li>
</ul>
<pre><code class="language-bash">erigon --http --ws --http.api eth,net,debug,trace
</code></pre>
<h3 id="ipc"><a class="header" href="#ipc">IPC</a></h3>
<p>IPC is a simpler transport protocol for use in local environments where the node and the client exist on the same machine.</p>
<p>The IPC transport can be enabled using <code>--socket.enabled</code> and configured with <code>--socket.url</code>:</p>
<pre><code class="language-bash">erigon --socket.enabled --socket.url unix:///var/run/erigon.ipc
</code></pre>
<p>On Linux and macOS, Erigon uses UNIX sockets. On Windows, IPC is provided using named pipes. The socket inherits the namespaces from <code>--http.api</code>.</p>
<h3 id="grpc"><a class="header" href="#grpc">gRPC</a></h3>
<p>Erigon also supports gRPC for high-performance access to blockchain data:</p>
<pre><code class="language-bash">rpcdaemon --grpc --grpc.addr localhost --grpc.port 9090
</code></pre>
<h3 id="https"><a class="header" href="#https">HTTPS</a></h3>
<p>Erigon supports HTTPS and HTTP/2 out of the box:</p>
<pre><code class="language-bash">rpcdaemon --https.enabled --https.cert /path/to/cert.pem --https.key /path/to/key.pem
</code></pre>
<h2 id="interacting-with-the-rpc"><a class="header" href="#interacting-with-the-rpc">Interacting with the RPC</a></h2>
<p>You can easily interact with these APIs just like you would with any Ethereum client.</p>
<p>You can use <code>curl</code>, a programming language with a low-level library, or tools like Foundry to interact with the chain at the exposed HTTP or WebSocket port.</p>
<p>To enable all APIs using an HTTP transport:</p>
<pre><code class="language-bash">erigon --http --http.api "admin,debug,eth,erigon,net,trace,txpool,web3"
</code></pre>
<p>This allows you to then call:</p>
<pre><code class="language-bash">curl -X POST -H "Content-Type: application/json" --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' localhost:8545

# With cast (if using Foundry)
cast block-number
cast rpc admin_nodeInfo  
cast rpc debug_traceTransaction &lt;tx_hash&gt;
cast rpc erigon_forks
</code></pre>
<h2 id="modular-architecture"><a class="header" href="#modular-architecture">Modular Architecture</a></h2>
<p>Erigon supports running components as separate processes. The RPC daemon can run independently from the main Erigon node:</p>
<pre><code class="language-bash"># Start main Erigon node
erigon --http=false --private.api.addr=localhost:9090

# Start separate RPC daemon
rpcdaemon --private.api.addr=localhost:9090 --http.api=eth,erigon,web3,net,debug,trace,txpool
</code></pre>
<p>This modular approach allows for better resource management and scalability.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../fundamentals/web3-wallet.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../interacting-with-erigon/eth.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../fundamentals/web3-wallet.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../interacting-with-erigon/eth.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
