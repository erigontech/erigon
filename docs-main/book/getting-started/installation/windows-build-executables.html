<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Build executable binaries natively for Windows - Erigon 3 Docs</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Erigon 3 documentation!">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Erigon 3 Docs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/erigontech/erigon" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="build-executable-binaries-natively-for-windows"><a class="header" href="#build-executable-binaries-natively-for-windows">Build executable binaries natively for Windows</a></h1>
<p>Before proceeding, ensure that the <a href="../getting-started/hw-requirements.html">hardware</a> and <a href="../getting-started/sw-requirements.html">software</a> requirements are met.</p>
<h2 id="installing-chocolatey"><a class="header" href="#installing-chocolatey">Installing Chocolatey</a></h2>
<p>Install <em>Chocolatey package manager</em> by following these <a href="https://docs.chocolatey.org/en-us/choco/setup">instructions</a>.</p>
<p>Once your Windows machine has the above installed, open the <strong>Command Prompt</strong> by typing "<strong>cmd</strong>" in the search bar and check that you have correctly installed Chocolatey:</p>
<pre><code class="language-bash">choco -v
</code></pre>
<img src="/images/choco-v.png" alt="" style="display: block; margin: 0 auto;">
<p>Now you need to install the following components: <code>cmake</code>, <code>make</code>, <code>mingw</code> by:</p>
<pre><code class="language-bash">choco install cmake make mingw
</code></pre>
<div class="warning">
<p><strong>Important note about Anti-Virus:</strong></p>
<p>During the compiler detection phase of <strong>MinGW</strong>, some temporary executable files are generated to test the compiler capabilities. It's been reported that some anti-virus programs detect these files as possibly infected with the <code>Win64/Kryptic.CIS</code> Trojan horse (or a variant of it). Although these are false positives, we have no control over the 100+ vendors of security products for Windows and their respective detection algorithms and we understand that this may make your experience with Windows builds uncomfortable. To work around this, you can either set exclusions for your antivirus software specifically for the<code>build\bin\mdbx\CMakeFiles</code> subfolder of the cloned repo, or you can run Erigon using the other two options below.</p>
</div>
<p>Make sure that the Windows System Path variable is set correctly. Use the search bar on your computer to search for “<strong>Edit the system environment variable</strong>”.</p>
<img src="/images/Edit_sys_env.png" alt="" style="display: block; margin: 0 auto;">
<p>Click the “<strong>Environment Variables...</strong>” button.</p>
<img src="/images/Edit_sys_env2.png" alt="" style="display: block; margin: 0 auto;">
<p>Look down at the "<strong>System variables</strong>" box and double click on "<strong>Path</strong>" to add a new path.</p>
<img src="/images/System_var.png" alt="" style="display: block; margin: 0 auto;">
<p>Then click on the "<strong>New</strong>" button and paste the following path:</p>
<pre><code class="language-bash"> C:\ProgramData\chocolatey\lib\mingw\tools\install\mingw64\bin
</code></pre>
<img src="/images/new_sys_var.png" alt="" style="display: block; margin: 0 auto;">
<h2 id="clone-the-erigon-repository"><a class="header" href="#clone-the-erigon-repository">Clone the Erigon repository</a></h2>
<p>Open the Command Prompt and type the following:</p>
<pre><code class="language-bash">git clone --branch release/3.1 --single-branch https://github.com/erigontech/erigon.git
</code></pre>
<p>You might need to change the <code>ExecutionPolicy</code> to allow scripts created locally or signed by a trusted publisher to run. Open a Powershell session as Administrator and type:</p>
<pre><code class="language-powershell">Set-ExecutionPolicy RemoteSigned
</code></pre>
<h2 id="compiling-erigon"><a class="header" href="#compiling-erigon">Compiling Erigon</a></h2>
<p>To compile Erigon there are two alternative methods:</p>
<ol>
<li><a href="#1-compiling-from-the-wmakeps1-file-in-the-file-explorer">Compiling from the wmake.ps1 file in the File Explorer</a></li>
<li><a href="#2-using-the-powershell-cli">Using the PowerShell CLI</a></li>
</ol>
<h3 id="1-compiling-from-the-wmakeps1-file-in-the-file-explorer"><a class="header" href="#1-compiling-from-the-wmakeps1-file-in-the-file-explorer">1. Compiling from the wmake.ps1 file in the File Explorer</a></h3>
<p>This is the fastest way which normally works for everyone. Open the File Explorer and go to the Erigon folder, then right click the <code>wmake</code> file and choose "<strong>Run with PowerShell</strong>".</p>
<img src="/images/powershell.png" alt="" style="display: block; margin: 0 auto;">
<p>PowerShell will compile Erigon and all of its modules. All binaries will be placed in the <code>.\build\bin\</code> subfolder.</p>
<img src="/images/powershell2.png" alt="" style="display: block; margin: 0 auto;">
<h3 id="2-using-the-powershell-cli"><a class="header" href="#2-using-the-powershell-cli">2. Using the PowerShell CLI</a></h3>
<p>In the search bar on your computer, search for “<strong>Windows PowerShell</strong>” and open it.</p>
<img src="/images/powershell3.png" alt="" style="display: block; margin: 0 auto;">
<p>Change the working directory to "<strong>erigon</strong>"</p>
<pre><code class="language-bash">cd erigon
</code></pre>
<img src="/images/powershell4.png" alt="" style="display: block; margin: 0 auto;">
<p>Before modifying security settings, ensure PowerShell script execution is allowed in your Windows account settings using the following command:</p>
<pre><code class="language-powershell">Set-ExecutionPolicy Bypass -Scope CurrentUser -Force
</code></pre>
<p>This change allows script execution, but use caution to avoid security risks. Remember to only make these adjustments if you trust the scripts you intend to run. Unauthorized changes can impact system security. For more info read <a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.security/set-executionpolicy?view=powershell-7.3">Set-Execution Policy</a> documentation.</p>
<p>Now you can compile Erigon and/or any of its component:</p>
<pre><code class="language-powershell">.\wmake.ps1 [-target] &lt;targetname&gt;
</code></pre>
<p>For example, to build the Erigon executable write:</p>
<pre><code class="language-powershell">.\wmake.ps1 erigon
</code></pre>
<img src="/images/powershell5.png" alt="" style="display: block; margin: 0 auto;">
<p>The executable binary <code>erigon.exe</code> should have been created in the <code>.\build\bin\</code> subfolder.</p>
<p>You can use the same command to build other binaries such as <code>RPCDaemon</code>, <code>TxPool</code>, <code>Sentry</code> and <code>Downloader</code>.</p>
<h2 id="running-erigon"><a class="header" href="#running-erigon">Running Erigon</a></h2>
<p>To start Erigon place your command prompt in the <code>.\build\bin\</code> subfolder and use:</p>
<pre><code class="language-powershell">start erigon.exe.
</code></pre>
<p>or from any place use the full address of the executable:</p>
<pre><code class="language-powershell">start C:\Users\username\AppData\Local\erigon.exe
</code></pre>
<p>See <a href="../basic-usage.html">basic usage</a> documentation on available options and flags to customize your Erigon experience.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../getting-started/installation/windows.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../getting-started/installation/windows-wsl.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../getting-started/installation/windows.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../getting-started/installation/windows-wsl.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
